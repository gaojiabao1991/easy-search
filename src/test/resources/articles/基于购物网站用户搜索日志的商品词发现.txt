 第  ２８卷第     １１期　　　                               计算机应用与软件                                               Ｖｏｌ２８Ｎｏ．１１
 ２０１１年   １１月　　                            ＣｏｍｐｕｔｅｒＡｐｐｌｉｃａｔｉｏｎｓａｎｄＳｏｆｔｗａｒｅ                                   Ｎｏｖ．２０１１

                     基于购物网站用户搜索日志的商品词发现

                                       杨锦锋　吕新波　关　毅　周春波
                                 （哈尔滨工业大学计算机科学与技术学院　黑龙江                   哈尔滨   １５０００１）

摘　要　　商品词是电子商务领域描述商品的新词。主要介绍基于购物网站用户搜索日志的商品词发现的方法。该方法从搜索日
志中提取用户查询，对查询进行分词，采用                    Ｎ元递增分步算法和串频统计，计算候选串的条件概率，选择候选商品词。为了降低人
工审核的成本，只对产出商品词的准确率进行评价。利用该方法在手机、面霜和香水三类商品的搜索日志上进行了实验，最高准确
率达到    ９２．５８％。

关键词　　商品词　新词发现　Ｎ元递增分步算法　串频统计

中图分类号　ＴＰ３９１．１                文献标识码　Ａ

    ＳＨＯＰＰＩＮＧＳＩＴＥＵＳＥＲＳＥＡＲＣＨＬＯＧＳＢＡＳＥＤＣＯＭＭＯＤＩＴＹＷＯＲＤＳＤＥＴＥＣＴＩＯＮ

                                  ＹａｎｇＪｉｎｆｅｎｇ　ＬüＸｉｎｂｏ　ＧｕａｎＹｉ　ＺｈｏｕＣｈｕｎｂｏ
                 （ＳｃｈｏｏｌｏｆＣｏｍｐｕｔｅｒＳｃｉｅｎｃｅａｎｄＴｅｃｈｎｏｌｏｇｙ，ＨａｒｂｉｎＩｎｓｔｉｔｕｔｅｏｆＴｅｃｈｎｏｌｏｇｙ，Ｈａｒｂｉｎ１５０００１，Ｈｅｉｌｏｎｇｊｉａｎｇ，Ｃｈｉｎａ）

Ａｂｓｔｒａｃｔ　　Ｃｏｍｍｏｄｉｔｙｗｏｒｄｓａｒｅａｎｅｗｐｈｒａｓｅｔｏｄｅｓｃｒｉｂｅｃｏｍｍｏｄｉｔｉｅｓｉｎｔｈｅｅｂｕｓｉｎｅｓｓｆｉｅｌｄ．Ｔｈｅｐａｐｅｒｍａｉｎｌｙｉｎｔｒｏｄｕｃｅｓａｓｈｏｐｐｉｎｇｓｉｔｅ
ｕｓｅｒｓｅａｒｃｈｌｏｇｓｂａｓｅｄｃｏｍｍｏｄｉｔｙｗｏｒｄｓｄｅｔｅｃｔｉｏｎｍｅｔｈｏｄ．Ｔｈｅｍｅｔｈｏｄｅｘｔｒａｃｔｓｕｓｅｒｑｕｅｒｉｅｓｆｒｏｍｓｅａｒｃｈｌｏｇｓ，ｗｈｉｃｈａｒｅｓｅｇｍｅｎｔｅｄｉｎｔｏ
ｐｈｒａｓｅｓ；ｔｈｅｎｉｔｕｓｅｓＮｇｒａｍｉｎｃｒｅａｓｉｎｇａｌｇｏｒｉｔｈｍａｎｄｓｔｒｉｎｇｆｒｅｑｕｅｎｃｙｓｔａｔｉｓｔｉｃｓｔｏｃａｌｃｕｌａｔｅｃｏｎｄｉｔｉｏｎａｌｐｒｏｂａｂｉｌｉｔｉｅｓｏｆｃａｎｄｉｄａｔｅｓｔｒｉｎｇｓａｎｄ
ｍａｋｅｓｃｈｏｉｃｅｓｆｒｏｍｃａｎｄｉｄａｔｅｃｏｍｍｏｄｉｔｙｗｏｒｄｓ．Ｔｏｃｕｔｄｏｗｎｍａｎｕａｌｒｅｖｉｅｗｃｏｓｔｓ，ｏｎｌｙｔｈｅｐｒｅｃｉｓｉｏｎｏｆｇｅｎｅｒａｔｅｄｃｏｍｍｏｄｉｔｙｗｏｒｄｓｉｓ
ｅｖａｌｕａｔｅｄ．Ｅｘｐｅｒｉｍｅｎｔｓｕｔｉｌｉｚｉｎｇｔｈｅｍｅｔｈｏｄａｒｅｐｅｒｆｏｒｍｅｄｏｎｓｅａｒｃｈｌｏｇｓａｂｏｕｔａｌｔｏｇｅｔｈｅｒｔｈｒｅｅｃｏｍｍｏｄｉｔｙｃａｔｅｇｏｒｉｅｓ，ｉ．ｅ．，ｍｏｂｉｌｅｓ，ｆａｃｅ
ｃｒｅａｍｓａｎｄｐｅｒｆｕｍｅｓ，ｗｈｏｓｅｈｉｇｈｅｓｔｐｒｅｃｉｓｉｏｎｒａｔｅｒｅａｃｈｅｓ９２．５８％．

Ｋｅｙｗｏｒｄｓ　　Ｃｏｍｍｏｄｉｔｙｗｏｒｄｓ　Ｎｅｗｗｏｒｄｓｄｅｔｅｃｔｉｏｎ　Ｎｇｒａｍｉｎｃｒｅａｓｉｎｇａｌｇｏｒｉｔｈｍ　Ｓｔｒｉｎｇｆｒｅｑｕｅｎｃｙｓｔａｔｉｓｔｉｃｓ

０　引　言                                                         １　相关研究

    随着购物网站的兴起，各种各样的商品快速进入到人们的                                     商品词的发现是新词发现在电子商务领域中的应用，以挖
生活，特别是电子消费类产品、日化产品、服装、食品等这些与人                                 掘电子商务领域的新词。目前，与商品词发现相关的研究主要
们生活密切相关的商品更是品牌繁多，产品种类繁多，因而越来                                  是产品命名实体识别和新词发现这两方面的研究。产品命名实
越多与商品相关的词汇（比如品牌名、产品名等）被人们所熟                                   体是具有完整句法结构并含有确定性 产品信息的名词性结
                                                                ［１］
知，但其中很多词汇并不是在词典里定义的，而是人们出于商品                                  构    ，和本文的商品词有较大的差异，而且产品命名实体识别
                                                              的研究大多依赖于一个品牌词库，而这正是本文研究所要挖掘
功能的描述、商品的营销等目的主观创造出来的。输入法作为
                                                              的新词。所以本文的研究主要借鉴新词发现研究中的方法。新
一种文字输入工具被广泛使用，这些新词如果不能被准确地识
                                                              词发现研究方法总体上有三种：基于规则的方法和基于统计的
别，将大大降低音字转换精度，影响用户使用体验。同时，这些
                                                              方法，以及规则和统计相结合的新词发现方法。
不能识别的新词也将影响电子商务领域数据挖掘和分析的性
                                                                  基于规则的新词发现方法，其主要思想就是根据新词的内
能。作为新词发现的又一分支，商品词发现的主要任务就是从
                                                              部结构特征（如关键词、词性等信息）和上下文信息构造规则
互联网数据中挖掘这些与商品相关的新词，为输入法提供词库
                                                              库，然后通过规则匹配的方式发现新词［２，３］。其优点是准确率
支持，提高用户音字转换精度、改善用户体验，也可为分词工具
                                                              高，针对性强，但规则的编写及规则库的维护需要大量人力，而
和产品命名实体识别等提供词库支持。                                                                                            ［４］
                                                              且规则一般受领域限制，适应性和可移植性比较差                           。基于统
    本文对商品词进行了定义，并对商品词的特点进行了分析，                                计的新词发现方法，主要基于符号的内部结合紧密度及其对上
针对某购物网站的搜索日志，提取以空格分隔的查询词，然后对

查询词进行串频统计选择最优粒度的候选串作为商品词。在手                                       收稿日期：２０１１－０９－０１。２０１１中国计算机大会论文。国家自然科
机、面霜、香水三类商品的商品词发现中，该方法取得了令人满                                  学基金项目（６０９７５０７７，６０７３６０４４）。杨锦锋，博士生，主研领域：统计自
意的结果。                                                         然语言处理。
 　
 第  １１期　　　                      杨锦锋等：基于购物网站用户搜索日志的商品词发现                                                            １０９　　

下文环境的依赖程度实现［５－８］。与基于规则的方法相比，基于                                在一起，由此，本文把品牌名和产品名的组合也视为商品词。
统计的方法可移植性好、灵活、容易实现，但模型训练需要大规                                      系列名通常是生产厂商或经销商根据某些标准将同一品牌
模的语料，一般存在数据稀疏和准确率低的问题［４］。基于统计                                 的产品分为若干个系列取的名字，如“天逸”，有些系列名也是
和规则相结合的方法其主要思想是采用统计方法处理语料提取                                   音译词，如“奥迪”；产品属性信息主要是对产品的外型、功能、
候选串，然后根据过滤规则和构词规则确定候选新词［９－１１］，由                               性能、生产批次等属性进行描述的信息，有些是组合词，如超薄
于基于统计和基于规则的新词发现方法各有优势和不足，为了                                   干爽，有些是习惯说法，如独显。系列名和属性值有些是数字或
更好地识别新词，该方法受到了广泛的关注。                                          英文字母，这些不在商品词发现的考虑范围之内。
    在特定领域的新词发现中，常规新词发现的方法被应用于                                     所以，商品词实际上是电子商务领域的新词。从商品词的
特定领域的语料数据上，从而实现特定领域的新词发现［１２，１３］。                              特点分析来看，商品词在构成上，规律性不是很强，长度也比较
而文献［１４］将智能仿生学算法应用到新词发现中，提出了一种                                 随意，因此商品词发现倾向于统计方法实现。考虑到商品词在
基于免疫遗传算法的网络新词识别方法。值得一提的是，文献                                   长度上应具有词的特点，即不能过长，因此在本文的研究中，商
［１５］将新词识别与用户行为相结合，提出了一种基于用户行为                                 品词的长度不大于          １０。
的专业领域新词发现方法，该方法依赖于用户日志，认为用户为                                  ２．３　商品词发现处理的数据
潜在专家，然后将那些在潜在专家群中频繁出现的典型词判定
                                                                  商品词广泛出现在各种互联网平台上，在购物网站中出现
为新词，适合发现专业领域新词，为本文的研究提供了借鉴。在
                                                              最为密集。用户在进行商品搜索时，通常是根据品牌、产品名
本文的研究中，我们选择电子商务领域的用户搜索日志作为商
                                                              称、系列名及关键参数进行搜索，考虑到用户的搜索方式，本文
品词发现的数据来源。
                                                              处理的数据采用某购物网站的用户搜索日志。
                                                                  图  １是一个搜索日志的例子。
２　商品词发现任务分析

２．１　商品词的定义
    产品从工厂出来进入市场，成为商品，经过中间流通环节，
最终到达消费者手中。在这个过程中，我们对商品的描述主要
包括商品的品牌名、产品名、系列名、型号以及规格参数（也叫
属性值）等这几个方面。对电子产品来说，系列名和型号通常                                                   图 １　某购物网站搜索日志示例
都具备，如“联想天逸          Ｆ４１ＭＭＴ（１６０Ｇ）笔记本电脑”，“联想”是                     在这个例子里，第一部分也就是第一行是商品的标题信息，
品牌，“天逸”是系列名，“Ｆ４１ＭＭＴ”是型号，“１６０Ｇ”是规格参                           第二部分也就是后三行是用户输入的查询，称作                         ｑｕｅｒｙ，并且根
数，“笔记本电脑”是产品名（或者产品类别词）。而化妆品或其                                 据这些    ｑｕｅｒｙ搜索到了这个商品，ｑｕｅｒｙ后的数字表示根据该
他日用品，通常没有型号，有时也没有系列名。如“帮宝适婴儿                                  ｑｕｅｒｙ成功搜索到这个商品的次数，简言之，就是该                       ｑｕｅｒｙ被成
纸尿裤，Ｓ型，超薄干爽”，“帮宝适”是品牌名，“婴儿纸尿裤”是                               功使用的次数。
产品名，“Ｓ型”和“超薄 干 爽”是规 格 参 数 或 者 叫 商 品 的 属                           用户在构造       ｑｕｅｒｙ的时候，通常只描述关键信息，表达比较
性值。                                                           精炼，比如品牌、产品名等，从这个例子也可以看出这点。基于
    在表示商品的五要素中，型号多表示为字母或数字，规格参                                此，商品词的发现基于用户的搜索日志展开。
数和系列名有时用汉字表示，有时也用字母或数字，品牌名、产                                      本文主要关注搜索日志中的第二部分。用户输入的                            ｑｕｅｒｙ
品名一般是多个汉字的组合词表示的。随着购物网站的兴盛，                                   一般以空格分隔，通常把用户的这种分隔叫做用户自然分词。
商品的品牌名、产品名、系列名等与商品有关的词大量出现在网                                  因为   ｑｕｅｒｙ中的词是人为切分的，这样的粒度是人最容易理解
络中，并迅速被人们所接受，但是这些词并不是词典里定义的                                   的，也是最能表达用户意图的。统计该购物网站七天的查询日
词，只是由于随着社会的进步、经济的发展，人们主观创造的称                                  志，共两千万查询，用空格分隔的查询占总查询的                         ９０％。但是
谓。这些与商品有关的词的发现是新词发现研究中的一项重要                                   这样人工自然分词的粒度也存在很多问题。首先，用户输入由
内容，本文把这些词称为商品词。                                               于随意性存在很多噪音，如书写错误；其次，ｑｕｅｒｙ中很多词的书
    在本文的研究中，文章给出商品词的概念。商品词就是描                                 写方式不同但是表达的是同一事物；更重要的是，ｑｕｅｒｙ中词的
述商品的品牌名、产品名、系列名和产品属性值的若干汉字组成                                  粒度具有冗余的修饰限定成分，用户没有把它们分开，很多修饰
的词或这些词的组合。                                                    成分没有必要和其修饰的实体组成一个词的粒度。何种粒度是
２．２　商品词的特点                                                    词的最优粒度就成为本文研究的重点。
    商品词中，品牌名有些是音译词，如“诺基亚”、“西门子”、
“露兰姬娜”等，有些是出于市场需要创造的词，如“步步高”、                                 ３　商品词发现的方法
“厦华”等。品牌名在长度上一般为二至四个字，也有更长一些
的。从词的构成上看，一般没什么规律，随意性较强。                                          本文基于用户搜索日志中的               ｑｕｅｒｙ挖掘商品词，ｑｕｅｒｙ长度
    而产品名多从功能的角度命名，如婴儿“纸尿裤”，“晚霜”、                              较短，缺乏足够的上下文信息，但由于                  ｑｕｅｒｙ是用户搜索目标的
“路由器”等，一般以“裤”、“机”、“器”、“油”等字结尾，也有一                             直接表达，所以        ｑｕｅｒｙ主要是由品牌名、产品名、系列名、属性值
些是音译词，如“巧克力”、“寿司”等，在长度上一般为二至四个                                这些商品词构成的。鉴于此，本文采取的方法是在对                            ｑｕｅｒｙ进
字。在很多日化产品的描述中，品牌名和产品名通常紧紧联系                                   行分词的基础上，进行串频统计，提取商品词。
 　
 １１０　　　　　                                         计算机应用与软件                                                     ２０１１年

３．１　商品词发现的方法概述                                                法的主要思想。
                                                                  在  Ｎ元递增分步算法的基础上，把存在包含关系的多个候
    通过对搜索日志的分析，从             ｑｕｅｒｙ中挖掘商品词，首先要去
                                                              选词组织到一个集合里，用              Ｖ  表示集合里最短的候选词，
掉分词工具可识别的词，再就是确定可作为商品词的合适的                                                               ｍｉｎ                         
                                                              Ｖ        表示集合里包含         Ｖ  的候选词，ｆ表示候选词的频率，
粒度。                                                            ｍｉｎ                   ｍｉｎ         ｉ
                                                              每个候选词      Ｖｉ形式如下：
    用户输入的      ｑｕｅｒｙ以空格自然分词，形成的每个子查询，也
                                                                  Ｖ   （ｆ）
叫查询词，是商品词的直接来源。如前分析，查询词可能包含冗                                        ｍｉｎ １
                                                                  Ｖ      （ｆ）
余的修饰成分，也可能是可识别的词。对于第一种情况，确定相                                        ｍｉｎ  ２
                                                                  ……
邻词的最有粒度就有可能去掉冗余的修饰成分，而第二种情况
                                                                      Ｖ       （ｆ）
查询词不太可能成为商品词。为了确定相邻词的最有粒度，需                                          ｍｉｎ   ｋ
                                                                  根据式（１）和式（２）计算每个候选词和                  Ｖ   的条件概率以
要对查询词进行分词，然后进行相邻组合，同时分词也可完成对                                                                             ｍｉｎ
                                                              及概率的均值。
已知词的识别，从而排除掉第二种情况的查询词。因此，我们对
                                       ［１６］                                                      ｆ
查询词进行分词处理。采用开源分词工具                       对查询词分词后，                                                 ｉ
                                                                                  ｐ（Ｖｉ  Ｖｍｉｎ）＝   ｋ                   （１）
如果查询词没有被切分，则该查询词是已存在的词，不作为商品
                                                                                                ∑ｆｉ
                                                                                                ｉ＝１
词发现的来源；如果查询词被切分成多段，甚至被切分成单字                                                                   ｋ
                                                                                           １                  １
（完全切散），那么，这些片断以某种粒度相邻组合，就有可能成
                                                                      ＡＶＧ（ｐ（Ｖｉ   Ｖｍｉｎ））＝     ∑ｐ（Ｖｉ    Ｖｍｉｎ）＝         （２）
                                                                                           ｋ ｉ＝１              ｋ
为一个候选新词，也就是商品词。比如下面的例子：
                                                                  当  ｉ＝１时，ｐ（Ｖ       Ｖ  ）表示当     Ｖ  出现且    Ｖ  独立出现时
    露兰姬娜面膜贴                                                                     ｍｉｎ  ｍｉｎ         ｍｉｎ       ｍｉｎ
                                                              的条件概率。如果          ｐ（Ｖ   Ｖ  ）＞ＡＶＧ（ｐ（Ｖ｜Ｖ       ）），则把    Ｖ 作
    这个查询词经过分词后的结果如下：                                                                ｉ  ｍｉｎ            ｉ  ｍｉｎ         ｉ
                                                              为候选新词。
    露　兰　姬　娜　面膜　贴
                                                                  候选新词的频率越高，表明该候选新词被单独使用的次数
    在这个例子中，查询词被切分成六段，那么就有可能包含商
                                                              越多，那么成为新词的可能性就越大，所以，对候选新词的排序
品词。组合词“露兰姬娜”和“面膜贴”就是一个商品词。
                                             ［９］              依据选择候选新词的频率。
    在组合粒度上，本文采用            Ｎ元递增分步算法            统计相邻词
                                                                  下面具体描述候选词的挖掘算法（在算法描述中，词                           Ｖ的
的组合的频率，在逐步增加相邻词数的过程中，不断用长串合并
                                                              频率用    ｆ（Ｖ）表示）：
短串，最后计算组合串的条件概率，得到候选的商品词。
                                                                  （１）初始化      Ｎ＝２。
    下面具体描述本文商品词发现的方法。
                                                                  （２）把每个      ｖｖ……ｖ     放到集合     Ｓ  里。
３．２　日志的预处理                                                                     １ ２    ｍ           Ｖ
                                                                  （３）对每个      ｖ１ｖ２……ｖｍ  取相邻的     Ｎ个词组合成一个词           ＶＮ，
    搜索日志是按照商品和搜索到该商品的                     ｑｕｅｒｙ的对应关系
                                                              统计词的频率        ｆ（ＶＮ），并为每个词建立一个集合             Ｓｋ，把该词放到
组织的，在本文的研究中，我们主要关注搜索到商品的                            ｑｕｅｒｙ。
                                                              集合   Ｓｋ里。
在挖掘商品词之前，需要对              ｑｕｅｒｙ进行过滤、统计等预处理操
                                                                  （４）如果     ＳＶ 里没有元素，流程转至⑻，如果还有元素，Ｎ＝
作。日志的预处理步骤如下：
                                                              Ｎ＋１。
    （１）把原始     ｑｕｅｒｙ按照空格分隔成子          ｑｕｅｒｙ，也叫查询词，查
                                                                  （５）遍历     Ｓｖ里每一个查询，如果          ｍ＜Ｎ，从     Ｓｖ里删除该查
询词的频率取原始          ｑｕｅｒｙ的频率。
                                                              询；否则，取连续的         Ｎ个词组合成一个词           ＶＮ。
    （２）对查询词过滤：
                                                                  （６）把每一个       ＶＮ 和每一个集合       Ｓｋ里的每个元素        Ｓｋｉ比较，
    ①  如果查询词只含有一个汉字，则抛弃；
                                                              匹配 被    ＶＮ 包 含 且 长 度 最 大 的      Ｓｋｉ，若存 在，则计 算       ｆ（ＶＮ）
    ②  去掉包含在过滤词表中的字符或词。过滤词表中的字
                                                               －ｆ（Ｓｋｉ）：
符是“－”、“＋”、“（”、“）”等一些特殊符号，过滤词表中的词是
                                                                  ①  如果差值为      ０，则把    Ｓｋｉ从 Ｓｋ里删除；
指一些表示促 销 信 息 （正品、专柜 等）和快 递 信 息 （包邮 等）
                                                                  ②  如果差值小于        ０，则把   Ｓｋｉ的频率修改为      ｆ（Ｓｋｉ）－ｆ（ＶＮ）；
的词；
                                                                  ③  把  ＶＮ 加入到    Ｓｋ。
       查询词中的英文和数字不予以考虑；
    ③                                                             （７）流程转至（４）。
    ④  过滤后的查询词用          ｗ１ｗ２……ｗｎ   表示，ｗｉ表示查询词里
                                                                  （８）   Ｓｋ 表示集合     Ｓｋ的元素个数。如果            Ｓｋ  ＝１，则直接
每一个汉字。如果          ｎ＝１，则抛弃。
                                                              把  Ｓｋ里元素作为新词，加入到新词集合                  Ｓｏｏｖ里。如果     Ｓｋ ＞１，
    （３）统计每个查询词在整个日志范围内的频率。
                                                              计算   Ｓｋ里每个元素       Ｓｋｉ频率的占比       ｐ（Ｓｋｉ）以及占比的平均值
    （４）对查询词进行分词，如果分词后，查询词仍然为一个
                                                              ＡＶＧ（ｐ（Ｓｋｉ））。计算公式如式（３）和式（４）所示。
词，说明该查询词不是新词，则抛弃。查询词经分词后的串用
                                                                                             ｆ（Ｓ）
                                                                                  ｐ（Ｓ）＝         ｋｉ                   （３）
ｖ１ｖ２……ｖｍ  表示，ｖｊ表示分词后的每一个词，也可能是单个汉                                                     ｋｉ     Ｓｋ
                                                                                               ｆ（Ｓ）
字，ｖｊ和   ｖｊ＋１用空格分隔。ｍ和         ｎ应该满足的条件是          １＜ｍ≤ｎ。                                     ∑      ｋｉ
                                                                                            ｉ＝１
                                                                                              Ｓｋ
３．３　候选词的挖掘                                                                                １                １
                                                                         ＡＶＧ（ｐ（Ｓｋｉ））＝        ∑ｐ（Ｓｋｉ）＝                （４）
    考虑到商品词的长度可能比较长，本文基于                      Ｎ元递增分步                                       Ｓｋ ｉ＝１          Ｓｋ

算法实现候选商品词的挖掘。但是                  Ｎ元递增分步算法是根据                      如果   ｐ（Ｓｋｉ）＞ＡＶＧ（ｐ（Ｓｋｉ）），则    Ｓｋｉ就成为一个新词，加入到

串频过滤低频串，而低频串未必就不是候选新词，因为串频的大                                  新词集合     Ｓｏｏｖ里，重复的不再加入。

小与商品的受关注度有关系。为了克服这个问题，本文采用候                                       （９）把   Ｓｏｏｖ里的候选词按照频率从高到低排序输出。最终
选词的条件概率作为选择候选词的依据。下面介绍本文采用方                                   结果输出为排序中指定数量的候选词。
 　
 第  １１期　　　                      杨锦锋等：基于购物网站用户搜索日志的商品词发现                                                            １１１　　


    在步骤（６）中，Ｓｋ数量庞大，为了加快每一个                    ＶＮ 和每一个         　　从表     １的评价结果可以看出，本文从搜索日志里发现商品

集合   Ｓｋ的匹配，考虑把每一个           Ｓｋ放到哈希表里，把最开始放入                   词的方法是有效的。相比较而言，从香水和面霜的搜索日志发

Ｓｋ里的二词组合词作为键。匹配的时候，把                     ＶＮ 里的字根据分            现的商品词的准确率较高，手机的较低。经过对搜索日志和产
词后的分隔形式两两相邻组合，把组合作为键从哈希表里查找                                   出的商品词分析，我们认为可能的原因如下：香水和面霜的品牌

到某个    Ｓｋ，把  ＶＮ 和  Ｓｋ 里的每个元素        Ｓｋｉ比较，大大减少循环              繁多，音译词的品牌占较大比重，而且产品类型繁多，用户在搜
次数。                                                           索时，输入的查询都力求准确地描述品牌名和产品名以保证准
３．４　挖掘算法的复杂度分析                                                确的搜索到目标商品，在这两类商品的搜索日志上，本文的方法
                                                              能非常有效地挖掘出商品词；而手机的品牌并不如香水和面霜
    在候选词的挖掘过程中，大量的数据处理集中在步骤（１）
                                                              的多，尤其是知名品牌更是寥寥可数，加之手机的功能范围较
至步骤（８）。步骤（１）至步骤（７）主要实现                  Ｎ元递增分步统计
                                                              广，用户在表达目标手机时通常不那么严谨，但仍希望能搜索到
串频，把存在包含关系的多个候选串组织到一个集合里并且长
                                                              目标手机，因而导致从手机的搜索日志里挖掘的商品词的准确
串合并短串，步骤（８）循环计算每个集合元素的条件概率。下
                                                              率相对较低。
面简单分析一下这个过程的时间复杂度。步骤（９）是复杂度已
知的排序过程，在此不作分析。
    设查询词的总数为          ｎ，表示处理数据的总量，查询词的最大                      ５　结　语
字符数为     Ｌ。步骤（１）至步骤（７）最外层循环的次数不超过                      ｎ×
                                                                  本文给出了商品词的定义，并对商品词的特点进行了分析，
Ｌ，步骤（３）循环取相邻的          Ｎ个词，循环次数不超过             Ｌ。步骤（６）
                                                              考虑到用户的搜索习惯，选择用户在购物网站上的搜索日志作
采用哈希表实现，ＶＮ         匹配   Ｓｋ的循环次数也不超过           Ｌ，设  Ｓｋ最大
                                                              为发现商品词的数据来源。在商品词发现的方法上，文章首先
元素个数为      Ｍ，ＶＮ  和  Ｓｋ里的每个元素比较的次数不超过                 Ｍ，这
                                                              对用户    ｑｕｅｒｙ进行分词，采用        Ｎ元递增分步算法，用长串合并短
样步骤（６）的循环次数不超过              Ｌ×Ｍ。步骤（１）至步骤（７）总的
                                                              串，并进行串频统计，计算候选串的条件概率，选择候选商品词。
循环次数上限为        ｎ×（Ｌ２  ＋Ｌ２  ×Ｍ）。   Ｓ   的上限为      ｎ×Ｌ，Ｓ   最
                                   ｋ                  ｋ       在本文的方法中，我们首先选择用户的搜索日志作为商品词的
大元素个数为       Ｍ，则步骤（８）的循环次数上限为               ｎ×Ｌ×Ｍ。
                                                              来源，而不是普通的网页文本，冗余的组合大大减少。其次，我
    步骤（１）至步骤（８）的循环次数上限为                 ｎ×（Ｌ２  ＋Ｌ２ ×Ｍ＋Ｌ
                                                              们对   Ｎ元递增分步算法进行了改进，主要体现在三个方面：（１）
×Ｍ）。设     Ｋ＝（Ｌ２  ＋Ｌ２ ×Ｍ＋Ｌ×Ｍ），Ｋ体现了不同类型商品的
                                                              Ｎ元递增是在分词基础上选择相邻的                     Ｎ个词组合成候选串；
商品词的特点，与        ｎ没有关系，所以步骤（１）至步骤（８）的时间
                                                              （２）因为我们处理的是用户的查询，所以在进行                      Ｎ元递增时，不
复杂度可以表示为          Ｏ（ｎ）。从时间复杂度分析来看，挖掘算法
                                                              对  Ｎ的上限施加限制，因而可以发现较长的商品词；（３）选择候
的时间效率很高。
                                                              选商品词时，以候选串的条件概率作为依据，而不考虑候选串的
                                                              频率。从三类商品的商品词评价结果来看，本文的方法取得了
４　实验结果及分析                                                     满意的结果。
                                                                  本文的方法虽然能较好地从搜索日志的挖掘出商品词，但
４．１　评价方式                                                      还无法对商品词进行分类，即确定哪些是品牌名、哪些是产品
    评价方式采取人工评价方式。实验随机选取手机、面霜和                                 名，哪些是系列名和属性值。对商品词进行分类，将大大提高语
香水三类商品各        １０００００个搜索日志，利用本文的方法分别从                         义标注的精确度和数据挖掘的精确度。要实现对商品词的分
三类商品的搜索日志里产出发现的新词，考虑到人工评价的成                                   类，需要考虑更多的上下文特征，或者结合购物网站中对商品描
本，取前    Ｎ个 产 出 结 果 作 为 评 价 数 据 （Ｎ取         １００，２００，……，        述的一些规则，这部分工作还需更深入细致的研究。在商品词
５００）。本文研究的目的是要从日渐积累的搜索日志中发现各                                  发现的评价上，我们只考虑了精确率指标，但是因为挖掘的商品
类商品的商品词不断为输入法提供新词，搜索日志数据量大，产                                  词应用于输入法，商品词的召回率指标也很重要，所以在后续的
出的候选商品词的量也很大，为了减少人工审核的成本，就要求                                  研究中，需要强化对召回率的评价。
产出的候选商品词的准确率尽可能大，评价指标主要考虑准确
                                                                                   参    考   文    献
率和平均准确率，准确率的计算如式（５）所示，平均准确率就是
各准确率的算术平均值。                                                   ［１］刘非凡，赵军，等．面向商务信息抽取的产品命名实体识别研究
                  前  Ｎ个新词中合格的商品词总数                                 ［Ｊ］．中文信息学报，２００６（１）：２３２６．
         准确率    ＝                                     （５）
                                Ｎ                             ［２］苑春法，黄昌宁．基于语素数据库的汉语语素及构词研究［Ｊ］．世
４．２　评价结果                                                           界汉语教学，１９９８（２）：７      １２．
                                                              ［３］ＣｈｅｎＡｉｔａｏ．ＣｈｉｎｅｓｅＷｏｒｄＳｅｇｍｅｎｔａｔｉｏｎＵｓｉｎｇＭｉｎｉｍａｌＬｉｎｇｕｉｓｔｉｃＫｎｏｗｌ
    三类商品的商品词准确率评价结果如表                    １所示。
                                                                   ｅｄｇｅ［Ｃ］／／ＰｒｏｃｅｅｄｉｎｇｓｏｆｔｈｅｓｅｃｏｎｄＳＩＧＨＡＮｗｏｒｋｓｈｏｐｏｎＣｈｉｎｅｓｅ
                表 １　三类商品的商品词准确率                                    ｌａｎｇｕａｇｅ．Ｓａｐｐｏｒｏ，Ｊａｐａｎ，２００３：１４８１５１．
                                                              ［４］张海军，史树敏．中文新词识别技术综述［Ｊ］．计算机科学，２０１０，
   商品             前  Ｎ个商品词的准确率                    平均
                                                                   ３７（３）：６  １０．
   类型     １００     ２００     ３００     ４００      ５００   准确率
                                                              ［５］罗盛芬，孙茂松．基于字串内部结合紧密度的汉语自动抽词实验研
   香水     ０．９１   ０．９３５    ０．９４    ０．９３    ０．９１４  ０．９２５８            究［Ｊ］．中文信息学报，２００３，１７（１）：９        １４．
                                                              ［６］   ＳｕｎＸｉａｏ，ＨｕａｎｇＤｅｇｅｎ．ＣｈｉｎｅｓｅＮｅｗＷｏｒｄＩｄｅｎｔｉｆｉｃａｔｉｏｎ：Ａ Ｌａｔｅｎｔ
   面霜     ０．８９    ０．８８    ０．８７   ０．８８７５   ０．８９６  ０．８８４７
                                                                   ＤｉｓｃｒｉｍｉｎａｔｉｖｅＭｏｄｅｌｗｉｔｈＧｌｏｂａｌＦｅａｔｕｒｅｓ［Ｊ］．ＪｏｕｒｎａｌｏｆＣｏｍｐｕｔｅｒ
   手机     ０．７９    ０．７６    ０．７６   ０．７２２５   ０．６８２  ０．７４２９
                                                                   Ｓｃｉｅｎｃｅ＆Ｔｅｃｈｎｏｌｏｇｙ，２０１１，２６（１）：１４２４．   （下转第    １６０页）
  　
  １６０　　　　　                                                 计算机应用与软件                                                               ２０１１年

的指令进行无干扰的交互。测试发现各类错误如表                                  １所示。                   ｂｙＡｎａｌｏｇｙ［Ｃ］／／Ｔｈｅ９ｔｈＩｎｔｅｒｎａｔｉｏｎａｌＣｏｎｆｅｒｅｎｃｅｏｎＩｎｔｅｌｌｉｇｅｎｔＴｅｘｔ
                                                                               ＰｒｏｃｅｓｓｉｎｇａｎｄＣｏｍｐｕｔａｔｉｏｎａｌＬｉｎｇｕｉｓｔｉｃｓ，２００８：１０６１１６．
                   表  １　协议符合性测试发现错误
                                                                         ［８］ＧａｏＤｏｎｇｐｉｎｇ，ＮｉｕＺｈｅｎｄｏｎｇ．ＣｈｉｎｅｓｅＵｎｋｎｏｗｎＷｏｒｄＲｅｃｏｇｎｉｔｉｏｎＢａｓｅｄ
     序号                 错误类型                    错误设备数量                         ｏｎＦｕｎｃｔｉｏｎａｌＡｐｐｌｉｃａｔｉｏｎｓｏｆＴｙｐｅＴｈｅｏｒｙ［Ｃ］／／ＰｒｏｃｅｅｄｉｎｇｓｏｆＩｎｔｅｒ
       １          包尾“＜ＣＲ＞＜ＬＦ＞”                        １                        ｎａｔｉｏｎａｌＳｙｍｐｏｓｉｕｍｏｎＩｎｔｅｌｌｉｇｅｎｔＩｎｆｏｒｍａｔｉｏｎＴｅｃｈｎｏｌｏｇｙＡｐｐｌｉｃａｔｉｏｎ
       ２      对角分隔符“；”和“，”无区分                         ５                        ２００８（ＩＩＴＡ２００８），ＩＥＥＥＣｏｍｐｕｔｅｒＳｏｃｉｅｔｙＰｒｅｓｓ，２００８，３：４９８５０２．
                                                                         ［９］郑家恒，李文花．新词语自动识别方法研究［Ｍ］／／自然语言理解与
       ３               校验码错误                          １
                                                                               机器翻译．北京：清华大学出版社，２００１．
       ４            指令执行不正确                           １
                                                                         ［１０］ＭｅｎｇＹａｏ，ＹＨａｏ．ＣｈｉｎｅｓｅＮｅｗＷｏｒｄＩｄｅｎｔｉｆｉｃａｔｉｏｎＢａｓｅｄｏｎＣｈａｒａｃ
       ５              拆分标志错误                          ２                        ｔｅｒＰａｒｓｉｎｇＭｏｄｅｌ［Ｃ］／／Ｔｈｅｆｉｒｓｔｉｎｔｅｒｎａｔｉｏｎａｌｊｏｉｎｔｃｏｎｆｅｒｅｎｃｅｏｎｎａｔ
       ６            字母大小写区分                           ４                        ｕｒａｌｌａｎｇｕａｇｅｐｒｏｃｅｓｓｉｎｇ（ＩＪＣＮＬＰ０４），２００４：４８９４９６．
                                                                         ［１１］ＪｉＷｅｎｙａｎ，ＰｅｎｇＴａｏ．ＣｈｉｎｅｓｅＷｏｒｄＳｅｇｍｅｎｔａｔｉｏｎａｎｄＯｕｔＯｆＶｏｃａｂｕ
     ２）压力测试                                                                    ｌａｒｙＷｏｒｄｓＤｅｔｅｃｔｉｏｎＵｓｉｎｇＳｕｆｆｉｘＡｒｒａｙ［Ｃ］／／２００９ＩｎｔｅｒｎａｔｉｏｎａｌＣｏｎ
     通过模 拟 多 现 场 机 与 上 位 机 的 交 互 进 行 并 发 压 力 测                                 ｆｅｒｅｎｃｅｏｎＷｅｂＩｎｆｏｒｍａｔｉｏｎＳｙｓｔｅｍｓａｎｄＭｉｎｉｎｇ．２００９：５６６０．
   ［５，６］
试      ，考察系统在多现场机并发情况下的性能表现，如系统对                                         ［１２］刘知 远，孙茂 松．基 于           ＷＥＢ的 计 算 机 领 域 新 术 语 的 自 动 检 测
通信协议的支持、接收能力及应答响应时间。下面以上传                                      ５分              ［Ｃ］／／内容计算的研究与应用前沿———第九届全国计算语言学学
钟数据的压力测试结果为例，表                     ２是压力测试结果数据表。表                               术会议论文集，２００７．
２给出了在模拟现场机数分别为                      ３００个、５００个、８００个的情况                    ［１３］刘华．一种快速获取领域新词语的新方法［Ｊ］．中文信息学报，
下，监测系统对上传             ５分钟数据的响应应答所需的平均响应时                                       ２００６（５）．
间、每秒处理能力及成功建立应答的连接数。                                                     ［１４］丁建立，慈祥．一种基于免疫遗传算法的网络新词识别方法［Ｊ］．

                     表  ２　压力测试结果数据表                                            计算机科学，２０１１，３８（１）：２４０２４５．
                                                                         ［１５］ＺｈｅｎｇＹａｂｉｎ，ＬｉｕＺｈｉｙｕａｎ．ＩｎｃｏｒｐｏｒａｔｉｎｇＵｓｅｒＢｅｈａｖｉｏｒｓｉｎＮｅｗＷｏｒｄ
          模拟现场机数（个）                     ３００       ５００       ８００
                                                                               Ｄｅｔｅｃｔｉｏｎ［Ｃ］／／ＴｈｅＩｎｔｅｒｎａｔｉｏｎａｌＪｏｉｎｔＣｏｎｆｅｒｅｎｃｅｏｎＡｒｔｉｆｉｃｉａｌＩｎｔｅｌｌｉ
               平均响应时间（秒）                １．０４     １．５８      １．８３
                                                                               ｇｅｎｃｅ（ＩＪＣＡＩ－０９）．Ｐａｓａｄｅｎａ，Ｃａｌｉｆｏｒｎｉａ，ＵＳＡ．２００９：２１０１２１０６．
 上传   ５分
                平均每秒事务数                ５２８．５     ７８４．９    １２３４．２         ［１６］ｈｔｔｐ：／／ｗｗｗ．ｆｔｐｈｐ．ｃｏｍ／ｓｃｗｓ／．
  钟数据
               成功收到应答链接                 ２７７       ４３８       ７４７          
                                                                         （上接第     １５６页）
                                                                         ［４］ＴｈｏｍａｓＲｙａｎＷ，ＤａｓｉｌｖａＬｕｉｚＡ，ＭａｃｋｅｎｚｉｅＡｌｌｅｎＢ．Ｃｏｇｎｉｔｉｖｅｎｅｔ
５　结　语                                                                          ｗｏｒｋｓ［Ｃ］／／２００５１ｓｔＩＥＥＥＩｎｔｅｒｎａｔｉｏｎａｌＳｙｍｐｏｓｉｕｍｏｎＮｅｗＦｒｏｎｔｉｅｒｓ
                                                                               ｉｎＤｙｎａｍｉｃＳｐｅｃｔｒｕｍＡｃｃｅｓｓＮｅｔｗｏｒｋｓ，ＤｙＳＰＡＮ２００５：３５２３６０．
     本文通过测试工具             ＳｉｌｋＰｅｒｆｏｒｍｅｒ模拟现场机与上位机的交                       ［５］ＴｈｏｍａｓＲｙａｎＷ，ＦｒｉｅｎｄＤａｎｉｅｌＨ，ＤａｓｉｌｖａＬｕｉｚＡ，ｅｔａｌ．Ｃｏｇｎｉｔｉｖｅ
互，测试验证交互过程中协议数据包的丢包率、粘包率、设计符                                                   ｎｅｔｗｏｒｋｓ：Ａｄａｐｔａｔｉｏｎａｎｄｌｅａｒｎｉｎｇｔｏａｃｈｉｅｖｅｅｎｄｔｏｅｎｄｐｅｒｆｏｒｍａｎｃｅ
合性以及在压力情况下系统对通信协议的支持、接收能力及应                                                    ｏｂｊｅｃｔｉｖｅｓ［Ｊ］．ＩＥＥＥＣｏｍｍｕｎｉｃａｔｉｏｎｓＭａｇａｚｉｎｅ，２００６，４４（１２）：５１
答响应时间等多方面性能表现。通信协议测试在指导数据采集                                                     ５７．
设备的选型、监控水平的提高和监控技术的改进等方面都起着                                              ［６］ＴｅｎｎｅｎｈｏｕｓｅＤＬ，ＳｍｉｔｈＪＭ，ＳｉｎｃｏｓｋｉｅＷＤ．Ａｓｕｒｖｅｙｏｆａｃｔｉｖｅｎｅｔ
重要的作用。                                                                         ｗｏｒｋｒｅｓｅａｒｃｈ［Ｊ］．ＩＥＥＥＣｏｍｍｕｎｉｃａｔｉｏｎｓＭａｇａｚｉｎｅ，２００４，３５（１）：８０
                        参     考     文    献                                      ８６．
                                                                         ［７］   ＮｇｕｙｅｎＴＴ，ＡｒｍｉｔａｇｅＧ．Ａｓｕｒｖｅｙｏｆｔｅｃｈｎｉｑｕｅｓｆｏｒｉｎｔｅｒｎｅｔｔｒａｆｆｉｃ
［１］中华人民共和国环境保护行业标准．污染源在线自动监控（监测）                                               ｃｌａｓｓｉｆｉｃａｔｉｏｎｕｓｉｎｇｍａｃｈｉｎｅｌｅａｒｎｉｎｇ［Ｊ］．ＩＥＥＥＣｏｍｍｕｎｉｃａｔｉｏｎｓＳｕｒ
      系统数据传输标准［Ｓ／ＯＬ］．ｈｔｔｐ：／／ｗｗｗ．ｓｅｐａ．ｇｏｖ．ｃｎ／ｔｅｃｈ／ｈｊｂｚ／
                                                                               ｖｅｙｓａｎｄＴｕｔｏｒｉａｌｓ，２００８，１０（４）：５６７６．
      ｂｚｗｂ／ｏｔｈｅｒ／ｑｔ／２００６０２／ｔ２００６０２０１＿７３０３８．ｈｔｍ．
                                                                         ［８］   ＣａｌｌａｄｏＡ，ＫａｍｉｅｎｓｋｉＣ．Ａ ｓｕｒｖｅｙｏｎｉｎｔｅｒｎｅｔｔｒａｆｆｉｃｉｄｅｎｔｉｆｉｃａｔｉｏｎ
［２］赵定远，苏立成．数据采集通信终端的设计与实现［Ｊ］．内江师范
                                                                               ［Ｊ］．ＩＥＥＥＣｏｍｍｕｎｉｃａｔｉｏｎｓＳｕｒｖｅｙｓａｎｄＴｕｔｏｒｉａｌｓ，２００９，１１（３）：３７
      学院学报，２００２，１７（６）．
                                                                               ５２．
［３］胡钢．点对多点的远程数据传输系统的研究［Ｊ］．河海大学常州分
                                                                         ［９］ＥｓｔｅＡ，ＧｒｉｎｇｏｌｉＦ，ＳａｌｇａｒｅｌｌｉＬ．ＳｕｐｐｏｒｔｖｅｃｔｏｒｍａｃｈｉｎｅｓｆｏｒＴＣＰｔｒａｆ
      校学报，２００１，１５（２）．
［４］赵宁社．嵌入式远程环境数据监控终端的控制系统设计与实现                                                 ｆｉｃｃｌａｓｓｉｆｉｃａｔｉｏｎ［Ｊ］．ＣｏｍｐｕｔｅｒＮｅｔｗｏｒｋｓ，２００９，５３（１４）：２４７６
      ［Ｄ］．西北大学，２００６．                                                            ２４９０．
［５］ＥｎＮｏｕａａｒｙＡ，ＲａｃｈｉｄａＤｓｓｏｕｌｉ，ＦｅｒｈａｔＫｈｅｎｄｅｋ．ＴｉｍｅｄＷｐＭｅｔｈｏｄ：              ［１０］ＷｕＷａｎ，ＭｃｃｕｅＬｅｉｇｈＳ，ＲｏｙＣｈｒｉｓｔｏｐｈｅｒＪ．Ｔｈｅｍｅｔｈｏｄｏｆｍａｎｕｆａｃ
      ＴｅｓｔｉｎｇＲｅａｌＴｉｍｅＳｙｓｔｅｍ［Ｃ］／／ＩＥＥＥＴｒａｎｓａｃｔｉｏｎｓｏｎＳｏｆｔｗａｒｅＥｎｇｉ               ｔｕｒｅｄｓｏｌｕｔｉｏｎｓａｐｐｌｉｅｄｔｏｃｈａｏｔｉｃｓｙｓｔｅｍｓ［Ｊ］．ＮｏｎｌｉｎｅａｒＤｙｎａｍｉｃｓ，
      ｎｅｅｒｉｎｇ，２００２，２８（１１）：１０２３１０３８．                                            ２０１１，６３（４）：６６７６７９．
［６］ＪａｍｅｓＡＷｈｉｔｔａｋｅｒ．ＷｈａｔＩｓＳｏｆｔｗａｒｅＴｅｓｔｉｎｇａｎｄＷｈｙＩｓＩｔＳｏＨａｒｄ？                ［１１］ＷｏｏｌｌｅｙＪｏｎａｔｈａｎＷ，ＡｇａｒｗａｌＰＫ，ＢａｋｅｒＪｏｈｎ．Ｍｏｄｅｌｉｎｇａｎｄｐｒｅｄｉｃ
      ［Ｃ］／／ＩＥＥＥＳｏｆｔｗａｒｅ，２０００．                                                  ｔｉｏｎｏｆｃｈａｏｔｉｃｓｙｓｔｅｍｓｗｉｔｈａｒｔｉｆｉｃｉａｌｎｅｕｒａｌｎｅｔｗｏｒｋｓ［Ｊ］．Ｉｎｔｅｒｎａｔｉｏｎａｌ
                                                        ＪｏｕｒｎａｌｆｏｒＮｕｍｅｒｉｃａｌＭｅｔｈｏｄｓｉｎＦｌｕｉｄｓ，２０１０，６３（８）：９８９１００４．
（上接第      １１１页）                                                          ［１２］ＷｉｔｔｅｎＩＨ，ＦｒａｎｋＥ．ＤＡＴＡＭＩＮＩＮＧ：ＰｒａｃｔｉｃａｌＭａｃｈｉｎｅＬｅａｒｎｉｎｇ
［７］ＬｉｎｄéｎＫ．ＡＰｒｏｂａｂｉｌｉｓｔｉｃＭｏｄｅｌｆｏｒＧｕｅｓｓｉｎｇＢａｓｅＦｏｒｍｓｏｆＮｅｗＷｏｒｄｓ                   ＴｏｏｌｓａｎｄＴｅｃｈｎｉｑｕｅｓ［Ｍ］．ＮｅｗＹｏｒｋ：ＳＦＭｏｒｇａｎＫａｕｆｍａｎ，２００５．
